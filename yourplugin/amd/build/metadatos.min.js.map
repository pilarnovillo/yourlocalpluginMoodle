{"version":3,"file":"metadatos.min.js","sources":["../src/metadatos.js"],"sourcesContent":["/*eslint linebreak-style: [\"error\", \"windows\"]*/\r\ndefine(['jquery','core/log'], function($, log){\r\n    log.debug('metadatos');\r\n    return {\r\n        init: function() {\r\n            $(document).ready(function(){\r\n\r\n                log.debug(\"CHECK METADATOS\");\r\n                // Function to create and append elements dynamically\r\n                /**\r\n                 * Crea un campo de entrada (input) y lo enlaza a la página.\r\n                 * @param {string} labelText - El texto que se mostrará en la etiqueta del campo.\r\n                 * @param {string} inputId - El ID del campo input.\r\n                 * @param {string} [type='text'] - El tipo de campo (text, number, date, etc.).\r\n                 * @param {string} [placeholder=''] - El texto del placeholder que se mostrará en el campo.\r\n                 * @returns {HTMLDivElement} - Un contenedor que incluye la etiqueta y el campo de entrada.\r\n                 */\r\n                function createInput(labelText, inputId, type = 'text', placeholder = '') {\r\n                    const container = document.createElement('div');\r\n\r\n                    const label = document.createElement('label');\r\n                    label.setAttribute('for', inputId);\r\n                    label.textContent = labelText;\r\n\r\n                    const input = document.createElement('input');\r\n                    input.type = type;\r\n                    input.id = inputId;\r\n                    input.placeholder = placeholder;\r\n\r\n                    container.appendChild(label);\r\n                    container.appendChild(document.createElement('br'));\r\n                    container.appendChild(input);\r\n                    container.appendChild(document.createElement('br'));\r\n\r\n                    return container;\r\n                }\r\n\r\n                /**\r\n                 * Crea un campo de selección (select) y lo enlaza a la página.\r\n                 * @param {string} labelText - El texto que se mostrará en la etiqueta del campo.\r\n                 * @param {string} selectId - El ID del campo select.\r\n                 * @param {Array<string>} options - Un array con las opciones para el select.\r\n                 * @returns {HTMLDivElement} - Un contenedor que incluye la etiqueta y el campo select.\r\n                 */\r\n                function createSelect(labelText, selectId, options) {\r\n                    const container = document.createElement('div');\r\n\r\n                    const label = document.createElement('label');\r\n                    label.setAttribute('for', selectId);\r\n                    label.textContent = labelText;\r\n\r\n                    const select = document.createElement('select');\r\n                    select.id = selectId;\r\n\r\n                    options.forEach(optionValue => {\r\n                        const option = document.createElement('option');\r\n                        option.value = optionValue;\r\n                        option.textContent = optionValue.charAt(0).toUpperCase() + optionValue.slice(1);\r\n                        select.appendChild(option);\r\n                    });\r\n\r\n                    container.appendChild(label);\r\n                    container.appendChild(document.createElement('br'));\r\n                    container.appendChild(select);\r\n                    container.appendChild(document.createElement('br'));\r\n\r\n                    return container;\r\n                }\r\n\r\n                // Function to collect the data and print it in the console\r\n                /**\r\n                 * Recoge los datos del formulario y los imprime en la consola.\r\n                 */\r\n                function guardarDatos() {\r\n                    const lomData = {\r\n                        general: {\r\n                            title: document.getElementById('title').value,\r\n                            description: document.getElementById('description').value,\r\n                            language: document.getElementById('language').value,\r\n                            keywords: document.getElementById('keywords').value\r\n                        },\r\n                        lifecycle: {\r\n                            author: document.getElementById('author').value,\r\n                            version: document.getElementById('version').value\r\n                        },\r\n                        metametadata: {\r\n                            metadataCreator: document.getElementById('metadataCreator').value,\r\n                            metadataDate: document.getElementById('metadataDate').value\r\n                        },\r\n                        technical: {\r\n                            format: document.getElementById('format').value,\r\n                            size: document.getElementById('size').value\r\n                        },\r\n                        educational: {\r\n                            interactivityType: document.getElementById('interactivityType').value,\r\n                            difficulty: document.getElementById('difficulty').value\r\n                        },\r\n                        rights: {\r\n                            cost: document.getElementById('cost').value,\r\n                            copyright: document.getElementById('copyright').value\r\n                        }\r\n                    };\r\n\r\n                    // Print the values in the console\r\n                    log.debug(lomData);\r\n                }\r\n\r\n                // Function to create the form\r\n                /**\r\n                 * Crea y genera el formulario de ontología LOM dinámicamente y lo añade al documento.\r\n                 */\r\n                function createLomForm() {\r\n                    var mainDiv = document.querySelector('div[role=\"main\"]');\r\n                    const lomForm = document.createElement('div');\r\n                    // const lomForm = document.getElementById('lom-form');\r\n\r\n                    // General Section\r\n                    lomForm.appendChild(createInput('Título:', 'title', 'text', 'Título del objeto de aprendizaje'));\r\n                    lomForm.appendChild(createInput('Descripción:', 'description', 'text',\r\n                    'Descripción del objeto de aprendizaje'));\r\n                    lomForm.appendChild(createInput('Idioma:', 'language', 'text', 'Idioma (ej: es)'));\r\n                    lomForm.appendChild(createInput('Palabras clave:', 'keywords', 'text', 'Palabras clave (separadas por comas)'));\r\n\r\n                    // Life Cycle Section\r\n                    lomForm.appendChild(createInput('Autor:', 'author', 'text', 'Nombre del autor'));\r\n                    lomForm.appendChild(createInput('Versión:', 'version', 'text', 'Versión del objeto de aprendizaje'));\r\n\r\n                    // Meta-metadata Section\r\n                    lomForm.appendChild(createInput('Creador de metadatos:', 'metadataCreator', 'text',\r\n                    'Nombre del creador de metadatos'));\r\n                    lomForm.appendChild(createInput('Fecha de creación de metadatos:', 'metadataDate', 'date'));\r\n\r\n                    // Technical Section\r\n                    lomForm.appendChild(createInput('Formato:', 'format', 'text', 'Formato del recurso (ej: video/mp4)'));\r\n                    lomForm.appendChild(createInput('Tamaño (en bytes):', 'size', 'number', 'Tamaño del recurso en bytes'));\r\n\r\n                    // Educational Section\r\n                    lomForm.appendChild(createInput('Tipo de Interactividad:', 'interactivityType', 'text',\r\n                    'Tipo de interactividad (ej: activo)'));\r\n                    lomForm.appendChild(createInput('Dificultad:', 'difficulty', 'text', 'Dificultad (ej: media)'));\r\n\r\n                    // Rights Section\r\n                    lomForm.appendChild(createSelect('¿Tiene costo?', 'cost', ['no', 'yes']));\r\n                    lomForm.appendChild(createSelect('Restricciones de derechos de autor', 'copyright', ['no', 'yes']));\r\n\r\n                    var metadatosTitulo = document.createElement('h3');\r\n                    metadatosTitulo.textContent = 'Cargar Metadatos';\r\n                    mainDiv.insertBefore(metadatosTitulo, mainDiv.firstChild);\r\n                    metadatosTitulo.insertAdjacentElement('afterend', lomForm);\r\n\r\n                    var buttonGuardar= document.createElement('button');\r\n\r\n                    buttonGuardar.setAttribute('id', 'buttonGuardar');\r\n                    buttonGuardar.textContent = 'Guardar Metadatos';\r\n\r\n                    // Add event listener to button\r\n                    buttonGuardar.addEventListener('click', async function() {\r\n                        log.debug(\"CLICKED\");\r\n                        guardarDatos();\r\n\r\n                        // Redirigir a la página de tu plugin local\r\n                        window.location.href = 'http://localhost/local/yourplugin/exportScorm.php?courseid=' + paramCourseid\r\n                        + '&oaid=' + paramOAID;\r\n\r\n                    });\r\n\r\n                    lomForm.insertAdjacentElement('afterend', buttonGuardar);\r\n                }\r\n\r\n                // Get the query string portion of the URL.\r\n                var queryString = window.location.search;\r\n\r\n                // Remove the leading '?' character.\r\n                queryString = queryString.substring(1);\r\n\r\n                // Split the query string into an array of key-value pairs.\r\n                var params = queryString.split('&');\r\n\r\n                // Create an object to store the parameters and their values.\r\n                var paramsObject = {};\r\n\r\n                // Iterate over the key-value pairs and populate the paramsObject.\r\n                params.forEach(function(param) {\r\n                    var keyValue = param.split('=');\r\n                    var key = decodeURIComponent(keyValue[0]);\r\n                    var value = decodeURIComponent(keyValue[1]);\r\n                    paramsObject[key] = value;\r\n                });\r\n\r\n                // Now you can access the parameters and their values from the paramsObject.\r\n                var paramCourseid = paramsObject['courseid'];\r\n                var paramOAID = paramsObject['oaid'];\r\n                // Call the function to create the form\r\n                createLomForm();\r\n\r\n\r\n            });\r\n        }\r\n    };\r\n});\r\n"],"names":["define","$","log","debug","init","document","ready","createInput","labelText","inputId","type","placeholder","container","createElement","label","setAttribute","textContent","input","id","appendChild","createSelect","selectId","options","select","forEach","optionValue","option","value","charAt","toUpperCase","slice","queryString","window","location","search","params","substring","split","paramsObject","param","keyValue","key","decodeURIComponent","paramCourseid","paramOAID","mainDiv","querySelector","lomForm","metadatosTitulo","insertBefore","firstChild","insertAdjacentElement","buttonGuardar","addEventListener","async","lomData","general","title","getElementById","description","language","keywords","lifecycle","author","version","metametadata","metadataCreator","metadataDate","technical","format","size","educational","interactivityType","difficulty","rights","cost","copyright","guardarDatos","href","createLomForm"],"mappings":"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"}